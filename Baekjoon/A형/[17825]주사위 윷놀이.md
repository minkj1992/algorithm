# [17825] 주사위 윷놀이
> https://www.acmicpc.net/problem/17825

## 1st try

- `4804ms`
```python
# #200225
# # 주사위 윷놀이 https://www.acmicpc.net/problem/17825
# # out : 주사위 10개를 알때 점수의 최댓값
# 파란색 칸에서 말이 이동을 시작하는 경우에는 파란색 화살표의 방향으로 이동해야 하며
# 파란색 칸을 지나가는 경우에는 빨간 화살표의 방향대로 이동해야 한다.

boards = {0: [0, 1, 2, 3, 4, 5],
         1: [2, 2, 3, 4, 5, 6],
         2: [4, 3, 4, 5, 6, 7],
         3: [6, 4, 5, 6, 7, 8],
         4: [8, 5, 6, 7, 8, 9, 10],
         5: [10, 21, 22, 23, 24, 30],
         6: [12, 7, 8, 9, 10, 11],
         7: [14, 8, 9, 10, 11, 12],
         8: [16, 9, 10, 11, 12, 13],
         9: [18, 10, 11, 12, 13, 14],
         10: [20, 25, 26, 24, 30, 31],
         11: [22, 12, 13, 14, 15, 16],
         12: [24, 13, 14, 15, 16, 17],
         13: [26, 14, 15, 16, 17, 18],
         14: [28, 15, 16, 17, 18, 19],
         15: [30, 27, 28, 29, 24, 30],
         16: [32, 17, 18, 19, 20, 32],
         17: [34, 18, 19, 20, 32, 32],
         18: [36, 19, 20, 32, 32, 32],
         19: [38, 20, 32, 32, 32, 32],
         20: [40, 32, 32, 32, 32, 32],
         21: [13, 22, 23, 24, 30, 31],
         22: [16, 23, 24, 30, 31, 20],
         23: [19, 24, 30, 31, 20, 32],
         24: [25, 30, 31, 20, 32, 32],
         25: [22, 26, 24, 30, 31, 20],
         26: [24, 24, 30, 31, 20, 32],
         27: [28, 28, 29, 24, 30, 31],
         28: [27, 29, 24, 30, 31, 20],
         29: [26, 24, 30, 31, 20, 32],
         30: [30, 31, 20, 32, 32, 32],
         31: [35, 20, 32, 32, 32, 32],
         32: [0, 32, 32, 32, 32, 32]
         }
dices = list(map(int,input().split()))

def rp_perms(arr,r):
    for i in range(len(arr)):
        if r == 1: yield [arr[i]]
        else:
            for nxt in rp_perms(arr,r-1):
                yield [arr[i]] + nxt

def play(perm):
    global result
    score = 0
    horses = [0]*4   # 말의 위치
    visited = [0]*33
    for i in range(10):
        pi = horses[perm[i]] # 몇번째말
        dist = dices[i] # 얼마나 움직이나
        ni = boards[pi][dist]

        if visited[ni] and ni!=32:return

        visited[pi] = 0
        visited[ni] = 1
        score += boards[ni][0]
        horses[perm[i]] = ni
    result = max(result, score)

# 4H10 = 13C10 = 13C3 = 1716
# 중복조합을 할경우 [0, 1, 1, 1, 0, 1, 0, 0, 1, 0] 이런 케이스를 만들지 못한다.
# -> 중복 순열
result = 0
for rpp in rp_perms(list(range(4)),10):
    play(rpp)
print(result)
```
```
[0, 1, 1, 1, 0, 1, 0, 0, 1, 0]
[0, 2, 2, 2, 0, 2, 0, 0, 2, 0]
[0, 3, 3, 3, 0, 3, 0, 0, 3, 0]
[1, 0, 0, 0, 1, 0, 1, 1, 0, 1]
[1, 2, 2, 2, 1, 2, 1, 1, 2, 1]
[1, 3, 3, 3, 1, 3, 1, 1, 3, 1]
[2, 0, 0, 0, 2, 0, 2, 2, 0, 2]
[2, 1, 1, 1, 2, 1, 2, 2, 1, 2]
[2, 3, 3, 3, 2, 3, 2, 2, 3, 2]
[3, 0, 0, 0, 3, 0, 3, 3, 0, 3]
[3, 1, 1, 1, 3, 1, 3, 3, 1, 3]
[3, 2, 2, 2, 3, 2, 3, 3, 2, 3]
190
```

다 같은 190인데 중복 순열을 사용하면 12번의 중복이 생긴다. -> 맨앞이 1이 되는 순간 끝내면 되자너

```
[0, 0, 0, 0, 1, 1, 1, 3, 0, 0]
[0, 0, 0, 0, 1, 1, 1, 3, 0, 1]
[0, 0, 0, 0, 1, 1, 1, 3, 0, 3]
[0, 0, 0, 0, 1, 1, 1, 3, 1, 0]
[0, 0, 0, 0, 1, 1, 1, 3, 1, 1]
[0, 0, 0, 0, 1, 1, 1, 3, 1, 3]
[0, 0, 0, 0, 1, 1, 1, 3, 3, 0]
[0, 0, 0, 0, 1, 1, 1, 3, 3, 1]
[0, 0, 0, 0, 1, 1, 1, 3, 3, 2]
[0, 0, 0, 0, 1, 1, 1, 3, 3, 3]
[0, 0, 0, 0, 1, 1, 2, 0, 0, 0]
[0, 0, 0, 0, 1, 1, 2, 0, 0, 1]
[0, 0, 0, 0, 1, 1, 2, 0, 1, 0]
[0, 0, 0, 0, 1, 1, 2, 0, 1, 1]
[0, 0, 0, 0, 1, 1, 2, 0, 1, 2]
[0, 0, 0, 0, 1, 1, 2, 1, 0, 0]
[0, 0, 0, 0, 1, 1, 2, 1, 0, 1]
[0, 0, 0, 0, 1, 1, 2, 1, 0, 2]
[0, 0, 0, 0, 1, 1, 2, 1, 1, 0]
[0, 0, 0, 0, 1, 1, 2, 1, 1, 1]
[0, 0, 0, 0, 1, 1, 2, 1, 1, 2]
[0, 0, 0, 0, 1, 1, 2, 1, 2, 0]
[0, 0, 0, 0, 1, 1, 2, 1, 2, 1]
[0, 0, 0, 0, 1, 1, 2, 1, 2, 2]
[0, 0, 0, 0, 1, 1, 2, 1, 2, 3]
[0, 0, 0, 0, 1, 1, 3, 0, 0, 0]
[0, 0, 0, 0, 1, 1, 3, 0, 0, 1]
[0, 0, 0, 0, 1, 1, 3, 0, 1, 0]
[0, 0, 0, 0, 1, 1, 3, 0, 1, 1]
[0, 0, 0, 0, 1, 1, 3, 0, 1, 3]
[0, 0, 0, 0, 1, 1, 3, 1, 0, 0]
[0, 0, 0, 0, 1, 1, 3, 1, 0, 1]
[0, 0, 0, 0, 1, 1, 3, 1, 0, 3]
[0, 0, 0, 0, 1, 1, 3, 1, 1, 0]
[0, 0, 0, 0, 1, 1, 3, 1, 1, 1]
[0, 0, 0, 0, 1, 1, 3, 1, 1, 3]
[0, 0, 0, 0, 1, 1, 3, 1, 3, 0]
[0, 0, 0, 0, 1, 1, 3, 1, 3, 1]
[0, 0, 0, 0, 1, 1, 3, 1, 3, 2]
[0, 0, 0, 0, 1, 1, 3, 1, 3, 3]
[0, 0, 0, 0, 2, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 2, 0, 0, 0, 0, 2]
[0, 0, 0, 0, 2, 0, 0, 0, 2, 0]
[0, 0, 0, 0, 2, 0, 0, 0, 2, 1]
[0, 0, 0, 0, 2, 0, 0, 0, 2, 2]
[0, 0, 0, 0, 2, 0, 0, 0, 2, 3]
[0, 0, 0, 0, 2, 0, 0, 2, 0, 0]
[0, 0, 0, 0, 2, 0, 0, 2, 0, 1]
[0, 0, 0, 0, 2, 0, 0, 2, 0, 2]
[0, 0, 0, 0, 2, 0, 0, 2, 0, 3]
[0, 0, 0, 0, 2, 0, 0, 2, 1, 0]
[0, 0, 0, 0, 2, 0, 0, 2, 1, 2]
[0, 0, 0, 0, 2, 0, 0, 2, 2, 0]
[0, 0, 0, 0, 2, 0, 0, 2, 2, 1]
[0, 0, 0, 0, 2, 0, 0, 2, 2, 2]
[0, 0, 0, 0, 2, 0, 0, 2, 2, 3]
[0, 0, 0, 0, 2, 0, 0, 2, 3, 0]
[0, 0, 0, 0, 2, 0, 0, 2, 3, 2]
[0, 0, 0, 0, 2, 0, 2, 0, 0, 0]
[0, 0, 0, 0, 2, 0, 2, 0, 0, 1]
[0, 0, 0, 0, 2, 0, 2, 0, 0, 2]
[0, 0, 0, 0, 2, 0, 2, 0, 0, 3]
[0, 0, 0, 0, 2, 0, 2, 0, 1, 0]
[0, 0, 0, 0, 2, 0, 2, 0, 1, 2]
[0, 0, 0, 0, 2, 0, 2, 0, 2, 0]
[0, 0, 0, 0, 2, 0, 2, 0, 2, 1]
[0, 0, 0, 0, 2, 0, 2, 0, 2, 2]
[0, 0, 0, 0, 2, 0, 2, 0, 2, 3]
[0, 0, 0, 0, 2, 0, 2, 0, 3, 0]
[0, 0, 0, 0, 2, 0, 2, 0, 3, 2]
[0, 0, 0, 0, 2, 0, 2, 1, 0, 0]
[0, 0, 0, 0, 2, 0, 2, 1, 0, 2]
[0, 0, 0, 0, 2, 0, 2, 1, 2, 0]
[0, 0, 0, 0, 2, 0, 2, 1, 2, 1]
[0, 0, 0, 0, 2, 0, 2, 1, 2, 2]
[0, 0, 0, 0, 2, 0, 2, 2, 0, 0]
[0, 0, 0, 0, 2, 0, 2, 2, 0, 1]
[0, 0, 0, 0, 2, 0, 2, 2, 0, 2]
[0, 0, 0, 0, 2, 0, 2, 2, 0, 3]
[0, 0, 0, 0, 2, 0, 2, 2, 1, 0]
[0, 0, 0, 0, 2, 0, 2, 2, 1, 1]
[0, 0, 0, 0, 2, 0, 2, 2, 1, 2]
[0, 0, 0, 0, 2, 0, 2, 2, 2, 0]
[0, 0, 0, 0, 2, 0, 2, 2, 2, 1]
[0, 0, 0, 0, 2, 0, 2, 2, 2, 2]
[0, 0, 0, 0, 2, 0, 2, 2, 2, 3]
[0, 0, 0, 0, 2, 0, 2, 2, 3, 0]
[0, 0, 0, 0, 2, 0, 2, 2, 3, 2]
[0, 0, 0, 0, 2, 0, 2, 2, 3, 3]
[0, 0, 0, 0, 2, 0, 2, 3, 0, 0]
[0, 0, 0, 0, 2, 0, 2, 3, 0, 2]
[0, 0, 0, 0, 2, 0, 2, 3, 2, 0]
[0, 0, 0, 0, 2, 0, 2, 3, 2, 2]
[0, 0, 0, 0, 2, 0, 2, 3, 2, 3]
[0, 0, 0, 0, 2, 2, 0, 0, 0, 0]
[0, 0, 0, 0, 2, 2, 0, 0, 0, 1]
[0, 0, 0, 0, 2, 2, 0, 0, 0, 2]
[0, 0, 0, 0, 2, 2, 0, 0, 0, 3]
[0, 0, 0, 0, 2, 2, 0, 0, 1, 0]
[0, 0, 0, 0, 2, 2, 0, 0, 1, 2]
[0, 0, 0, 0, 2, 2, 0, 0, 2, 0]
[0, 0, 0, 0, 2, 2, 0, 0, 2, 1]
[0, 0, 0, 0, 2, 2, 0, 0, 2, 2]
[0, 0, 0, 0, 2, 2, 0, 0, 2, 3]
[0, 0, 0, 0, 2, 2, 0, 0, 3, 0]
[0, 0, 0, 0, 2, 2, 0, 0, 3, 2]
[0, 0, 0, 0, 2, 2, 0, 1, 0, 0]
[0, 0, 0, 0, 2, 2, 0, 1, 0, 2]
[0, 0, 0, 0, 2, 2, 0, 1, 2, 0]
[0, 0, 0, 0, 2, 2, 0, 1, 2, 1]
[0, 0, 0, 0, 2, 2, 0, 1, 2, 2]
[0, 0, 0, 0, 2, 2, 0, 2, 0, 0]
[0, 0, 0, 0, 2, 2, 0, 2, 0, 1]
[0, 0, 0, 0, 2, 2, 0, 2, 0, 2]
[0, 0, 0, 0, 2, 2, 0, 2, 0, 3]
[0, 0, 0, 0, 2, 2, 0, 2, 1, 0]
[0, 0, 0, 0, 2, 2, 0, 2, 1, 1]
[0, 0, 0, 0, 2, 2, 0, 2, 1, 2]
[0, 0, 0, 0, 2, 2, 0, 2, 2, 0]
[0, 0, 0, 0, 2, 2, 0, 2, 2, 1]
[0, 0, 0, 0, 2, 2, 0, 2, 2, 2]
[0, 0, 0, 0, 2, 2, 0, 2, 2, 3]
[0, 0, 0, 0, 2, 2, 0, 2, 3, 0]
[0, 0, 0, 0, 2, 2, 0, 2, 3, 2]
[0, 0, 0, 0, 2, 2, 0, 2, 3, 3]
[0, 0, 0, 0, 2, 2, 0, 3, 0, 0]
[0, 0, 0, 0, 2, 2, 0, 3, 0, 2]
[0, 0, 0, 0, 2, 2, 0, 3, 2, 0]
[0, 0, 0, 0, 2, 2, 0, 3, 2, 2]
[0, 0, 0, 0, 2, 2, 0, 3, 2, 3]
[0, 0, 0, 0, 2, 2, 1, 0, 0, 0]
[0, 0, 0, 0, 2, 2, 1, 0, 0, 2]
[0, 0, 0, 0, 2, 2, 1, 0, 2, 0]
[0, 0, 0, 0, 2, 2, 1, 0, 2, 1]
[0, 0, 0, 0, 2, 2, 1, 0, 2, 2]
[0, 0, 0, 0, 2, 2, 1, 2, 0, 0]
[0, 0, 0, 0, 2, 2, 1, 2, 0, 1]
[0, 0, 0, 0, 2, 2, 1, 2, 0, 2]
[0, 0, 0, 0, 2, 2, 1, 2, 1, 0]
[0, 0, 0, 0, 2, 2, 1, 2, 1, 1]
[0, 0, 0, 0, 2, 2, 1, 2, 1, 2]
[0, 0, 0, 0, 2, 2, 1, 2, 1, 3]
[0, 0, 0, 0, 2, 2, 1, 2, 2, 0]
[0, 0, 0, 0, 2, 2, 1, 2, 2, 1]
[0, 0, 0, 0, 2, 2, 1, 2, 2, 2]
[0, 0, 0, 0, 2, 2, 2, 0, 0, 0]
[0, 0, 0, 0, 2, 2, 2, 0, 0, 1]
[0, 0, 0, 0, 2, 2, 2, 0, 0, 2]
[0, 0, 0, 0, 2, 2, 2, 0, 0, 3]
[0, 0, 0, 0, 2, 2, 2, 0, 1, 0]
[0, 0, 0, 0, 2, 2, 2, 0, 1, 1]
[0, 0, 0, 0, 2, 2, 2, 0, 1, 2]
[0, 0, 0, 0, 2, 2, 2, 0, 2, 0]
[0, 0, 0, 0, 2, 2, 2, 0, 2, 1]
[0, 0, 0, 0, 2, 2, 2, 0, 2, 2]
[0, 0, 0, 0, 2, 2, 2, 0, 2, 3]
[0, 0, 0, 0, 2, 2, 2, 0, 3, 0]
[0, 0, 0, 0, 2, 2, 2, 0, 3, 2]
[0, 0, 0, 0, 2, 2, 2, 0, 3, 3]
[0, 0, 0, 0, 2, 2, 2, 1, 0, 0]
[0, 0, 0, 0, 2, 2, 2, 1, 0, 1]
[0, 0, 0, 0, 2, 2, 2, 1, 0, 2]
[0, 0, 0, 0, 2, 2, 2, 1, 1, 0]
[0, 0, 0, 0, 2, 2, 2, 1, 1, 1]
[0, 0, 0, 0, 2, 2, 2, 1, 1, 2]
[0, 0, 0, 0, 2, 2, 2, 1, 1, 3]
[0, 0, 0, 0, 2, 2, 2, 1, 2, 0]
[0, 0, 0, 0, 2, 2, 2, 1, 2, 1]
[0, 0, 0, 0, 2, 2, 2, 1, 2, 2]
[0, 0, 0, 0, 2, 2, 2, 2, 0, 0]
[0, 0, 0, 0, 2, 2, 2, 2, 0, 1]
[0, 0, 0, 0, 2, 2, 2, 2, 0, 2]
[0, 0, 0, 0, 2, 2, 2, 2, 0, 3]
[0, 0, 0, 0, 2, 2, 2, 2, 1, 0]
[0, 0, 0, 0, 2, 2, 2, 2, 1, 1]
[0, 0, 0, 0, 2, 2, 2, 2, 1, 2]
[0, 0, 0, 0, 2, 2, 2, 2, 2, 0]
[0, 0, 0, 0, 2, 2, 2, 2, 2, 1]
... 중략 ...
[0, 0, 3, 0, 3, 3, 3, 2, 2, 2]
[0, 0, 3, 0, 3, 3, 3, 2, 2, 3]
[0, 0, 3, 0, 3, 3, 3, 2, 3, 0]
[0, 0, 3, 0, 3, 3, 3, 2, 3, 2]
[0, 0, 3, 0, 3, 3, 3, 2, 3, 3]
[0, 0, 3, 0, 3, 3, 3, 3, 0, 0]
[0, 0, 3, 0, 3, 3, 3, 3, 0, 1]
[0, 0, 3, 0, 3, 3, 3, 3, 0, 2]
[0, 0, 3, 0, 3, 3, 3, 3, 0, 3]
[0, 0, 3, 0, 3, 3, 3, 3, 1, 0]
[0, 0, 3, 0, 3, 3, 3, 3, 1, 1]
[0, 0, 3, 0, 3, 3, 3, 3, 1, 3]
[0, 0, 3, 0, 3, 3, 3, 3, 2, 0]
[0, 0, 3, 0, 3, 3, 3, 3, 2, 2]
[0, 0, 3, 0, 3, 3, 3, 3, 2, 3]
[0, 0, 3, 0, 3, 3, 3, 3, 3, 0]
[0, 0, 3, 0, 3, 3, 3, 3, 3, 1]
[0, 0, 3, 0, 3, 3, 3, 3, 3, 2]
[0, 0, 3, 0, 3, 3, 3, 3, 3, 3]

```
- 그럼에도 불구하고 정말 많은 경우가 존재한다.
- 실험 결과 4배 빨라졌다.
- 그렇다면 ... 값이 


## 2nd try
- 388ms

```python
# #200225
# # 주사위 윷놀이 https://www.acmicpc.net/problem/17825
# # out : 주사위 10개를 알때 점수의 최댓값
# 파란색 칸에서 말이 이동을 시작하는 경우에는 파란색 화살표의 방향으로 이동해야 하며
# 파란색 칸을 지나가는 경우에는 빨간 화살표의 방향대로 이동해야 한다.

boards = {0: [0, 1, 2, 3, 4, 5],
         1: [2, 2, 3, 4, 5, 6],
         2: [4, 3, 4, 5, 6, 7],
         3: [6, 4, 5, 6, 7, 8],
         4: [8, 5, 6, 7, 8, 9, 10],
         5: [10, 21, 22, 23, 24, 30],
         6: [12, 7, 8, 9, 10, 11],
         7: [14, 8, 9, 10, 11, 12],
         8: [16, 9, 10, 11, 12, 13],
         9: [18, 10, 11, 12, 13, 14],
         10: [20, 25, 26, 24, 30, 31],
         11: [22, 12, 13, 14, 15, 16],
         12: [24, 13, 14, 15, 16, 17],
         13: [26, 14, 15, 16, 17, 18],
         14: [28, 15, 16, 17, 18, 19],
         15: [30, 27, 28, 29, 24, 30],
         16: [32, 17, 18, 19, 20, 32],
         17: [34, 18, 19, 20, 32, 32],
         18: [36, 19, 20, 32, 32, 32],
         19: [38, 20, 32, 32, 32, 32],
         20: [40, 32, 32, 32, 32, 32],
         21: [13, 22, 23, 24, 30, 31],
         22: [16, 23, 24, 30, 31, 20],
         23: [19, 24, 30, 31, 20, 32],
         24: [25, 30, 31, 20, 32, 32],
         25: [22, 26, 24, 30, 31, 20],
         26: [24, 24, 30, 31, 20, 32],
         27: [28, 28, 29, 24, 30, 31],
         28: [27, 29, 24, 30, 31, 20],
         29: [26, 24, 30, 31, 20, 32],
         30: [30, 31, 20, 32, 32, 32],
         31: [35, 20, 32, 32, 32, 32],
         32: [0, 32, 32, 32, 32, 32]
         }
dices = list(map(int,input().split()))

def rp_perms(arr,r):
    for i in range(len(arr)):
        if r == 1: yield [arr[i]]
        else:
            for nxt in rp_perms(arr,r-1):
                yield [arr[i]] + nxt

def rp_combs(arr,r):
    for i in range(len(arr)):
        if r == 1: yield [arr[i]]
        else:
            for nxt in rp_combs(arr[i:],r-1):
                yield [arr[i]] + nxt

def play(perm):
    global result
    score = 0
    horses = [0]*4   # 말의 위치
    visited = [0]*33
    for i in range(10):
        pi = horses[perm[i]] # 몇번째말
        dist = dices[i] # 얼마나 움직이나
        ni = boards[pi][dist]

        if visited[ni] and ni!=32:return

        visited[pi] = 0
        visited[ni] = 1
        score += boards[ni][0]
        horses[perm[i]] = ni
    result = max(result, score)

# 4H10 = 13C10 = 13C3 = 1716
# 중복조합을 할경우 [0, 1, 1, 1, 0, 1, 0, 0, 1, 0] 이런 케이스를 만들지 못한다.
# -> 중복 순열
result = 0
for rpp in rp_perms(list(range(3)),10):
    play(rpp)

for rpc in rp_combs(list(range(4)),10):
    play(rpc)
print(result)
```
- 4개짜리는 combination에 포함되네..
- 2개짜리, 3개짜리는 permutation해야 한다.
- 중복 조합을 내가 제대로 하는 걸까?

## 3rd try
**10개의 공을 1개 바구니, 2개 바구니, 3개 바구니, 4개 바구니를 만들 수 있는 경우의 수는 얼마일까?**
- 가장 적절한 방법 아닐까?
- 수학적으로 가장 올바른 방법이 뭘까?

## 4th try
- 132 ms
- `backtrack1`
    - permutation에서 1번째에 2가 나오면 끝낸다.
        - 2번째에 3이 나오는 경우를 잡지 않는 이유는, [003....] ... [01...]이 존재하기 때문이다.
- `backtrack2`
    - 대신 play에서 2번째에 3이 나오는 경우를 return 해주었다.

```python
boards = {0: [0, 1, 2, 3, 4, 5],
         1: [2, 2, 3, 4, 5, 6],
         2: [4, 3, 4, 5, 6, 7],
         3: [6, 4, 5, 6, 7, 8],
         4: [8, 5, 6, 7, 8, 9, 10],
         5: [10, 21, 22, 23, 24, 30],
         6: [12, 7, 8, 9, 10, 11],
         7: [14, 8, 9, 10, 11, 12],
         8: [16, 9, 10, 11, 12, 13],
         9: [18, 10, 11, 12, 13, 14],
         10: [20, 25, 26, 24, 30, 31],
         11: [22, 12, 13, 14, 15, 16],
         12: [24, 13, 14, 15, 16, 17],
         13: [26, 14, 15, 16, 17, 18],
         14: [28, 15, 16, 17, 18, 19],
         15: [30, 27, 28, 29, 24, 30],
         16: [32, 17, 18, 19, 20, 32],
         17: [34, 18, 19, 20, 32, 32],
         18: [36, 19, 20, 32, 32, 32],
         19: [38, 20, 32, 32, 32, 32],
         20: [40, 32, 32, 32, 32, 32],
         21: [13, 22, 23, 24, 30, 31],
         22: [16, 23, 24, 30, 31, 20],
         23: [19, 24, 30, 31, 20, 32],
         24: [25, 30, 31, 20, 32, 32],
         25: [22, 26, 24, 30, 31, 20],
         26: [24, 24, 30, 31, 20, 32],
         27: [28, 28, 29, 24, 30, 31],
         28: [27, 29, 24, 30, 31, 20],
         29: [26, 24, 30, 31, 20, 32],
         30: [30, 31, 20, 32, 32, 32],
         31: [35, 20, 32, 32, 32, 32],
         32: [0, 32, 32, 32, 32, 32]
         }
dices = list(map(int,input().split()))

def rp_perms(arr,r):
    for i in range(len(arr)):
        if r == 1: yield [arr[i]]
        else:
            for nxt in rp_perms(arr,r-1):
                yield [arr[i]] + nxt

def rp_combs(arr,r):
    for i in range(len(arr)):
        if r == 1: yield [arr[i]]
        else:
            for nxt in rp_combs(arr[i:],r-1):
                yield [arr[i]] + nxt

def play(perm):
    global result
    if perm[2] == 3: return # backtrack2
    score = 0
    horses = [0]*4   # 말의 위치
    visited = [0]*33
    for i in range(10):
        pi = horses[perm[i]] # 몇번째말
        if pi == 32: return  # backtrack3
        dist = dices[i] # 얼마나 움직이나
        ni = boards[pi][dist]

        if visited[ni] and ni!=32:return

        visited[pi] = 0
        visited[ni] = 1
        score += boards[ni][0]
        horses[perm[i]] = ni
    result = max(result, score)

result = 0
for rpp in rp_perms(list(range(3)),10):
    if rpp[1] == 2:break    # backtrack1
    play(rpp)

for rpc in rp_combs(list(range(4)),10):
    play(rpc)
print(result)
```

## 4th try
- 124ms
```python
boards = {0: [0, 1, 2, 3, 4, 5],
         1: [2, 2, 3, 4, 5, 6],
         2: [4, 3, 4, 5, 6, 7],
         3: [6, 4, 5, 6, 7, 8],
         4: [8, 5, 6, 7, 8, 9, 10],
         5: [10, 21, 22, 23, 24, 30],
         6: [12, 7, 8, 9, 10, 11],
         7: [14, 8, 9, 10, 11, 12],
         8: [16, 9, 10, 11, 12, 13],
         9: [18, 10, 11, 12, 13, 14],
         10: [20, 25, 26, 24, 30, 31],
         11: [22, 12, 13, 14, 15, 16],
         12: [24, 13, 14, 15, 16, 17],
         13: [26, 14, 15, 16, 17, 18],
         14: [28, 15, 16, 17, 18, 19],
         15: [30, 27, 28, 29, 24, 30],
         16: [32, 17, 18, 19, 20, 32],
         17: [34, 18, 19, 20, 32, 32],
         18: [36, 19, 20, 32, 32, 32],
         19: [38, 20, 32, 32, 32, 32],
         20: [40, 32, 32, 32, 32, 32],
         21: [13, 22, 23, 24, 30, 31],
         22: [16, 23, 24, 30, 31, 20],
         23: [19, 24, 30, 31, 20, 32],
         24: [25, 30, 31, 20, 32, 32],
         25: [22, 26, 24, 30, 31, 20],
         26: [24, 24, 30, 31, 20, 32],
         27: [28, 28, 29, 24, 30, 31],
         28: [27, 29, 24, 30, 31, 20],
         29: [26, 24, 30, 31, 20, 32],
         30: [30, 31, 20, 32, 32, 32],
         31: [35, 20, 32, 32, 32, 32],
         32: [0, 32, 32, 32, 32, 32]
         }
dices = list(map(int,input().split()))

def rp_perms(arr,r):
    for i in range(len(arr)):
        if r == 1: yield [arr[i]]
        else:
            for nxt in rp_perms(arr,r-1):
                yield [arr[i]] + nxt

def rp_combs(arr,r):
    for i in range(len(arr)):
        if r == 1: yield [arr[i]]
        else:
            for nxt in rp_combs(arr[i:],r-1):
                yield [arr[i]] + nxt

def play(perm):
    global result
    if perm[2] == 3: return # backtrack1
    is_num_exist = [0] * 4  # backtrack4
    for p in perm:
        if p!=0 and not is_num_exist[p-1]: return
        is_num_exist[p] = 1
    
    
    score = 0
    horses = [0]*4   # 말의 위치
    visited = [0]*33
    for i in range(10):
        pi = horses[perm[i]] # 몇번째말
        if pi == 32: return  # backtrack2
        dist = dices[i] # 얼마나 움직이나
        ni = boards[pi][dist]

        if visited[ni] and ni!=32:return

        visited[pi] = 0
        visited[ni] = 1
        score += boards[ni][0]
        horses[perm[i]] = ni
    result = max(result, score)

result = 0
for rpp in rp_perms(list(range(3)),10):
    if rpp[1] == 2:break    # backtrack3
    play(rpp)

for rpc in rp_combs(list(range(4)),10):
    play(rpc)
print(result)
```